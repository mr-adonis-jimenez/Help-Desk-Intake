<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Help Desk Mini</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>Help Desk Mini</h1>
    <div class="actions">
      <button id="exportCsvBtn" title="Download CSV of tickets">Export CSV</button>
      <button id="clearAllBtn" class="danger" title="Delete ALL tickets">Clear All</button>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Create Ticket</h2>
      <form id="ticketForm" novalidate>
        <div class="grid">
          <label>
            <span>Subject *</span>
            <input id="subject" name="subject" maxlength="120" required />
          </label>
          <label>
            <span>Requester Email *</span>
            <input id="email" name="email" type="email" required />
          </label>
          <label>
            <span>Priority</span>
            <select id="priority" name="priority">
              <option>Low</option>
              <option selected>Normal</option>
              <option>High</option>
              <option>Urgent</option>
            </select>
          </label>
        </div>
        <label>
          <span>Description *</span>
          <textarea id="description" name="description" rows="4" required></textarea>
        </label>
        <div class="form-actions">
          <button type="submit">Add Ticket</button>
        </div>
        <p id="formError" class="error"></p>
      </form>
    </section>

    <section class="card">
      <div class="list-header">
        <h2>Tickets</h2>
        <div class="list-controls">
          <input id="search" placeholder="Search subject/email" />
          <select id="statusFilter">
            <option value="">All</option>
            <option value="Open">Open</option>
            <option value="Closed">Closed</option>
          </select>
          <select id="sortBy">
            <option value="updated_desc">Recently updated</option>
            <option value="created_desc">Newest first</option>
            <option value="created_asc">Oldest first</option>
            <option value="priority_desc">Priority high→low</option>
            <option value="priority_asc">Priority low→high</option>
          </select>
        </div>
      </div>

      <div class="table-wrap" role="region" aria-label="Tickets table">
        <table class="table">
          <thead>
            <tr>
              <th>Subject</th>
              <th>Requester</th>
              <th>Priority</th>
              <th>Status</th>
              <th>Created</th>
              <th>Updated</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
      <p id="empty" class="muted">No tickets yet. Create your first one above.</p>
    </section>
  </main>

  <footer class="foot">
    <small>Local-only demo. Data stored in this browser.</small>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
